<!DOCTYPE html>

<html>

<head>

   <title>Document</title>
</head>
<body>
   <button onclick="subscribe()"> subscribe</button>

   <script>
      addEventListener('load',async () =>{
         let sw = await navigator.serviceWorker.register('./sw.js');
         console.log(sw);
      })
      async function subscribe(){
         let sw= await navigator.serviceWorker.ready;
         let push = await sw.pushManager.subscribe({
            userVisibleOnly : true , 
            applicationServerKey : 'BIVZuMkEPguJ0uQDdolbdGiHZmY_V2EmlXCIfcTp6iHBclbK8eR1RmQe_ehrQpJOR6R9qtAeVBDg8UTk7xuCsrY'
         })
         console.log(JSON.stringify(push));
      }
   </script>
</body>
</html>